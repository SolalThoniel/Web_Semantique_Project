
<!DOCTYPE html>

<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <title>Titre de l'onglet</title>
    </head > <!-- fin de la 1ère partie : l'entête (les réglages) -->
 
    <body>
        <h1 id = "titre" >Comic Search</h1>
       <!-- <img src="images/poisson.png" /> -->
        <p id = "paragraphe">
            Ici nous avons un moteur de recherche de Comics
        </p> 
	<TEXTAREA id = "mots_cles" rows=1 cols=40>Entrer ici vos mots cles de recherche</TEXTAREA>
	<button onclick = "functionTitre()"> Rechercher </button>


	<table id="tableauID" border="1"></table>

  	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

	<script>

	        function functionTitre () {  
		    var motsCles = document.getElementById("mots_cles").value;
		    document.getElementById("paragraphe").innerHTML = motsCles;
			var query = encodeURIComponent(  'Select ?c where{ ?c  rdf:type dbo:Comic.  ?c rdfs:label ?label. Filter(contains(?label, '+motsCles+')) }');
                        var query2 = encodeURIComponent(  'Select ?c where{ ?c  rdf:type dbo:Comic.  ?c dbo:author ?author. ?author rdfs:label ?authorName Filter(contains(?authorName, '+motsCles+')) }');

			var url = 'http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query='+ query +'&output=json';
			var url2 = 'http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query='+ query2 +'&output=json';

			var rep1 ;
			var rep2 ;

			$.getJSON(url+"&callback=?", function(resultats) {
				rep1 = resultats.results.bindings;
			  $(resultats.results.bindings).each(function(i) {

			/*	document.getElementById("paragraphe").innerHTML = resultats.results.bindings[i].c.value ;*/
				str = JSON.stringify(resultats.results.bindings );
				console.log(str);
				

			  });

			});

			$.getJSON(url2+"&callback=?", function(resultats) {
				rep2 = resultats.results.bindings;
			  $(resultats.results.bindings).each(function(i) {
			/*	document.getElementById("paragraphe").innerHTML = resultats.results.bindings[i].c.value ;*/
				str = JSON.stringify(resultats.results.bindings );
				console.log(str); 

			  });

			});

			if(rep1.length > rep2.length) document.getElementById("paragraphe").innerHTML = "label";
			else document.getElementById("paragraphe").innerHTML = "auteur";
		}
  	</script>

    </body> <!-- fin de la 2e partie : le corps (la partie visible) -->
</html>
